<!DOCTYPE html>
<html>
  <head>
	<title>Place Mapper Game</title>
	<script src="/js/jquery.js"></script>
  	<link href="/bootstrap/css/bootstrap.css" rel="stylesheet">
	<script src="/bootstrap/js/bootstrap.js"></script>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; width: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 88%; width:100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDhcFl3Kw3amhvtaY9fzr9BiyUu6YPfqc0&sensor=false&libraries=geometry">
    </script>
	<script src="/js/maps.js"></script>
	<script> 
	var markers = [];
	var resultLine;
	var resultMarker;
	
var map;
function initialize() {

        var mapOptions = {
          center: new google.maps.LatLng(43.074844,-89.384265),
          zoom: 14,
		  maxZoom: 19,
		  streetViewControl: 0
        };
		
	var styles = [
		{ 
			featureType: "poi.business",
			elementType: "labels",
			stylers: [{ visibility: "off" }]
		}
	]
		
		
		
		
        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
		map.setOptions({styles:styles});
		
	  
		//add click listener
		google.maps.event.addListener(map, 'click', function(event) {
		addMarker(event.latLng);
	  });
}

	// Add a marker to the map and push to the array.
	function addMarker(location) {
	  clearMarkers();
	  var marker = new google.maps.Marker({
		position: location,
		map: map
	  });
	  markers.push(marker);

	}

	// Sets the map on all markers in the array.
	function setAllMap(map) {
	  for (var i = 0; i < markers.length; i++) {
		markers[i].setMap(map);
		//also remove result line and marker
		if (resultLine) {resultLine.setMap(null)};
		if (resultMarker) {resultMarker.setMap(null)};
	  }
	}
	// Removes the markers from the map, but keeps them in the array.
	function clearMarkers() {
	  setAllMap(null);
	  markers = []
	}
	
      google.maps.event.addDomListener(window, 'load', initialize);
  </script>
  </head>
  <body>
   <nav id="header" class="row navbar navbar-default" style="margin-right:0px; margin-left:0px; margin-bottom:0px">
			<strong><div class="col-md-1 navbar-left" id="barname"></div></strong>
			<button type="button" class="btn btn-success col-md-1 navbar-left" id="submit">Submit Location</button>
			<div id="correct" class="col-md-3"></div>
			<div id="distance" class="col-md-3"></div>
			<div id="score" class="col-md-1 navbar-right"></div>
	</nav>
	<div id="map-canvas"> </div>
	<button class="btn btn-primary" data-toggle="modal" data-target=".bs-help-modal-sm">Help</button>
	<a class="btn btn-primary" href="/leaderboard">Leaderboard</a>
	<!-- Small modal -->
	<div class="modal fade bs-help-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-sm">
		<div class="modal-content">
		  <ol>
			<li> Click on the map to place a marker where you think the bar is </li>
			<li> Click the submit button </li>
			<li> Check the new bar name and place a new marker </li>
		  </ol>
		</div>
	  </div>
	</div>
  </body>
</html>